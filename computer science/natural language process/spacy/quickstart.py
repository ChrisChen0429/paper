# Import the English language class
from spacy.lang.en import English
# Create the nlp object
nlp = English()
# Process a text
doc = nlp("This is a sentence.")
# Print the document text
print(doc.text)

# Select the first token
first_token = doc[0:3]
# Print the first token's text
print(first_token.text)

doc = nlp("In 1990, more than 60% of people in East Asia were in extreme poverty. "
    "Now less than 4% are.")

# Iterate over the tokens in the doc
for token in doc:
    # Check if the token resembles a number
    if token.like_num:
        # Get the next token in the document
        next_token = doc[token.i + 1]
        # Check if the next token's text equals '%'
        if next_token.text == "%":
            print("Percentage found:", token.text)


# Print the text and the predicted part-of-speech tag
import spacy
nlp = spacy.load('en_core_web_sm')
doc = nlp("She ate the pizza")
for token in doc:
    print(token.text, token.pos_)

# Predicting Syntactic Dependencies
for token in doc:
    print(token.text, token.pos_, token.dep_, token.head.text)

#Predicting Named Entities
doc = nlp(u"Apple is looking at buying U.K. startup for $1 billion")
for ent in doc.ents:
    print(ent.text, ent.label_)
spacy.explain('GPE')


# Rule-based matching
from spacy.matcher import Matcher
matcher = Matcher(nlp.vocab)
pattern = [
    {'IS_DIGIT': True},
    {'LOWER': 'fifa'},
    {'LOWER': 'world'},
    {'LOWER': 'cup'},
    {'IS_PUNCT': True}
]
matcher.add('NEW_PATTERN', None, pattern)
doc = nlp("2018 FIFA World Cup: France won!")
matches = matcher(doc)
for match_id, start, end in matches:
    # Get the matched span
    matched_span = doc[start:end]
    print(matched_span.text)

a = [{"fipsCode":"482014115011","traffic_fraction":0.001,"people_fraction":0.003,"venue_air_distance":"2482","population":"2198"},{"fipsCode":"482014127001","traffic_fraction":0.005,"people_fraction":0.006,"venue_air_distance":"1275","population":"1250"},{"fipsCode":"482013303012","traffic_fraction":0.003,"people_fraction":0.002,"venue_air_distance":"8188","population":"2019"},{"fipsCode":"482014133002","traffic_fraction":0.006,"people_fraction":0.007,"venue_air_distance":"1918","population":"2211"},{"fipsCode":"482014125001","traffic_fraction":0.008,"people_fraction":0.004,"venue_air_distance":"373","population":"873"},{"fipsCode":"482013131001","traffic_fraction":0.003,"people_fraction":0.004,"venue_air_distance":"4394","population":"2605"},{"fipsCode":"482014206002","traffic_fraction":0.005,"people_fraction":0.003,"venue_air_distance":"4447","population":"1653"},{"fipsCode":"482014122003","traffic_fraction":0.002,"people_fraction":0.004,"venue_air_distance":"2809","population":"1786"},{"fipsCode":"482014204002","traffic_fraction":0.004,"people_fraction":0.004,"venue_air_distance":"4745","population":"1561"},{"fipsCode":"482014124002","traffic_fraction":0.008,"people_fraction":0.008,"venue_air_distance":"1186","population":"1612"},{"fipsCode":"482013140013","traffic_fraction":0.004,"people_fraction":0.003,"venue_air_distance":"4800","population":"2110"},{"fipsCode":"482014203003","traffic_fraction":0.003,"people_fraction":0.003,"venue_air_distance":"3752","population":"1188"},{"fipsCode":"482013140025","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"4127","population":"1900"},{"fipsCode":"482014124004","traffic_fraction":0.013,"people_fraction":0.011,"venue_air_distance":"65","population":"1319"},{"fipsCode":"482014233021","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"8212","population":"1072"},{"fipsCode":"482014133004","traffic_fraction":0.004,"people_fraction":0.004,"venue_air_distance":"1880","population":"1010"},{"fipsCode":"482014126003","traffic_fraction":0.012,"people_fraction":0.008,"venue_air_distance":"694","population":"781"},{"fipsCode":"482013132004","traffic_fraction":0.003,"people_fraction":0.002,"venue_air_distance":"6456","population":"559"},{"fipsCode":"482014320011","traffic_fraction":0.001,"people_fraction":0.001,"venue_air_distance":"4949","population":"1690"},{"fipsCode":"482014320012","traffic_fraction":0.002,"people_fraction":0.002,"venue_air_distance":"3770","population":"1896"},{"fipsCode":"482013143003","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"3487","population":"2493"},{"fipsCode":"482014215001","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"3361","population":"642"},{"fipsCode":"482014129002","traffic_fraction":0.006,"people_fraction":0.005,"venue_air_distance":"1738","population":"1805"},{"fipsCode":"482014234013","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"8896","population":"1721"},{"fipsCode":"482014204003","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"4714","population":"831"},{"fipsCode":"482014129001","traffic_fraction":0.008,"people_fraction":0.004,"venue_air_distance":"1931","population":"1986"},{"fipsCode":"482014233012","traffic_fraction":0.001,"people_fraction":0.001,"venue_air_distance":"7305","population":"2026"},{"fipsCode":"482014126001","traffic_fraction":0.028,"people_fraction":0.01,"venue_air_distance":"0","population":"1755"},{"fipsCode":"482014123002","traffic_fraction":0.012,"people_fraction":0.007,"venue_air_distance":"1800","population":"1451"},{"fipsCode":"482014117002","traffic_fraction":0.005,"people_fraction":0.004,"venue_air_distance":"1795","population":"1889"},{"fipsCode":"482014203002","traffic_fraction":0.002,"people_fraction":0.002,"venue_air_distance":"3884","population":"770"},{"fipsCode":"482014133003","traffic_fraction":0.003,"people_fraction":0.004,"venue_air_distance":"1758","population":"1260"},{"fipsCode":"482014130001","traffic_fraction":0.029,"people_fraction":0.015,"venue_air_distance":"254","population":"2165"},{"fipsCode":"482014131001","traffic_fraction":0.009,"people_fraction":0.007,"venue_air_distance":"628","population":"1221"},{"fipsCode":"482014129003","traffic_fraction":0.006,"people_fraction":0.004,"venue_air_distance":"2334","population":"815"},{"fipsCode":"482014225002","traffic_fraction":0.004,"people_fraction":0.004,"venue_air_distance":"6206","population":"929"},{"fipsCode":"482014209003","traffic_fraction":0.006,"people_fraction":0.005,"venue_air_distance":"2078","population":"1486"},{"fipsCode":"482014224011","traffic_fraction":0.001,"people_fraction":0.001,"venue_air_distance":"7264","population":"1368"},{"fipsCode":"482014226001","traffic_fraction":0.003,"people_fraction":0.002,"venue_air_distance":"5130","population":"1482"},{"fipsCode":"482014130002","traffic_fraction":0.021,"people_fraction":0.012,"venue_air_distance":"229","population":"1872"},{"fipsCode":"482014236004","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"9468","population":"2854"},{"fipsCode":"482014202001","traffic_fraction":0.002,"people_fraction":0.004,"venue_air_distance":"3714","population":"1383"},{"fipsCode":"482014215003","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"2636","population":"1476"},{"fipsCode":"482014132021","traffic_fraction":0.002,"people_fraction":0.003,"venue_air_distance":"2293","population":"910"},{"fipsCode":"482014132022","traffic_fraction":0.01,"people_fraction":0.008,"venue_air_distance":"1803","population":"2415"},{"fipsCode":"482014118003","traffic_fraction":0.007,"people_fraction":0.008,"venue_air_distance":"1524","population":"1870"},{"fipsCode":"482014207003","traffic_fraction":0.002,"people_fraction":0.004,"venue_air_distance":"4337","population":"1942"},{"fipsCode":"482014208003","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"3459","population":"786"},{"fipsCode":"482014215004","traffic_fraction":0.002,"people_fraction":0.003,"venue_air_distance":"3910","population":"1831"},{"fipsCode":"482014217003","traffic_fraction":0.003,"people_fraction":0.003,"venue_air_distance":"4753","population":"1210"},{"fipsCode":"482014319002","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"3068","population":"2708"},{"fipsCode":"482014220003","traffic_fraction":0.003,"people_fraction":0.003,"venue_air_distance":"5610","population":"827"},{"fipsCode":"482014123005","traffic_fraction":0.003,"people_fraction":0.004,"venue_air_distance":"1854","population":"1195"},{"fipsCode":"482014209004","traffic_fraction":0.02,"people_fraction":0.008,"venue_air_distance":"1960","population":"1984"},{"fipsCode":"482014120003","traffic_fraction":0.001,"people_fraction":0.001,"venue_air_distance":"3044","population":"943"},{"fipsCode":"482014217004","traffic_fraction":0.001,"people_fraction":0.001,"venue_air_distance":"4571","population":"1065"},{"fipsCode":"482014233022","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"7910","population":"2409"},{"fipsCode":"482014219001","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"4709","population":"888"},{"fipsCode":"482014203001","traffic_fraction":0.001,"people_fraction":0.001,"venue_air_distance":"3067","population":"1604"},{"fipsCode":"482014127002","traffic_fraction":0.023,"people_fraction":0.015,"venue_air_distance":"554","population":"2228"},{"fipsCode":"482013303011","traffic_fraction":0.002,"people_fraction":0.004,"venue_air_distance":"6919","population":"6288"},{"fipsCode":"482014303001","traffic_fraction":0.001,"people_fraction":0.001,"venue_air_distance":"7702","population":"1141"},{"fipsCode":"482014122001","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"2275","population":"527"},{"fipsCode":"482013140023","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"4414","population":"1149"},{"fipsCode":"482014220002","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"6478","population":"1245"},{"fipsCode":"482014123003","traffic_fraction":0.009,"people_fraction":0.009,"venue_air_distance":"1148","population":"1226"},{"fipsCode":"482013144002","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"3158","population":"2146"},{"fipsCode":"482014226002","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"5875","population":"1034"},{"fipsCode":"482014128001","traffic_fraction":0.041,"people_fraction":0.025,"venue_air_distance":"559","population":"2214"},{"fipsCode":"482014122004","traffic_fraction":0.006,"people_fraction":0.005,"venue_air_distance":"2259","population":"2324"},{"fipsCode":"482013341002","traffic_fraction":0.007,"people_fraction":0.01,"venue_air_distance":"3494","population":"8954"},{"fipsCode":"482014201001","traffic_fraction":0.006,"people_fraction":0.004,"venue_air_distance":"3026","population":"1869"},{"fipsCode":"482014128003","traffic_fraction":0.01,"people_fraction":0.01,"venue_air_distance":"1479","population":"1614"},{"fipsCode":"482014131003","traffic_fraction":0.01,"people_fraction":0.008,"venue_air_distance":"494","population":"1169"},{"fipsCode":"482014131002","traffic_fraction":0.019,"people_fraction":0.009,"venue_air_distance":"856","population":"942"},{"fipsCode":"482013144001","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"2968","population":"1354"},{"fipsCode":"482014210001","traffic_fraction":0.003,"people_fraction":0.002,"venue_air_distance":"1912","population":"1215"},{"fipsCode":"482014120002","traffic_fraction":0.001,"people_fraction":0.003,"venue_air_distance":"2433","population":"1066"},{"fipsCode":"482014209002","traffic_fraction":0.014,"people_fraction":0.013,"venue_air_distance":"1804","population":"2242"},{"fipsCode":"482014216003","traffic_fraction":0.001,"people_fraction":0.001,"venue_air_distance":"3147","population":"1680"},{"fipsCode":"482014204001","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"4915","population":"1046"},{"fipsCode":"482013306002","traffic_fraction":0.002,"people_fraction":0.002,"venue_air_distance":"10374","population":"1687"},{"fipsCode":"482014124003","traffic_fraction":0.005,"people_fraction":0.004,"venue_air_distance":"830","population":"993"},{"fipsCode":"482014123004","traffic_fraction":0.006,"people_fraction":0.004,"venue_air_distance":"1459","population":"1505"},{"fipsCode":"482014227013","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"5008","population":"2220"},{"fipsCode":"482013132001","traffic_fraction":0,"people_fraction":0.001,"venue_air_distance":"8069","population":"1112"},{"fipsCode":"482014123001","traffic_fraction":0.003,"people_fraction":0.003,"venue_air_distance":"2099","population":"1540"},{"fipsCode":"482014208001","traffic_fraction":0.002,"people_fraction":0.002,"venue_air_distance":"2498","population":"681"},{"fipsCode":"482014316001","traffic_fraction":0.001,"people_fraction":0.001,"venue_air_distance":"6742","population":"841"},{"fipsCode":"482014132012","traffic_fraction":0.004,"people_fraction":0.005,"venue_air_distance":"1375","population":"1356"},{"fipsCode":"482014225004","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"5901","population":"928"},{"fipsCode":"482013309001","traffic_fraction":0.002,"people_fraction":0.004,"venue_air_distance":"9331","population":"6430"},{"fipsCode":"482014319001","traffic_fraction":0.001,"people_fraction":0.001,"venue_air_distance":"3323","population":"736"},{"fipsCode":"482013131002","traffic_fraction":0.003,"people_fraction":0.004,"venue_air_distance":"3536","population":"598"},{"fipsCode":"482014210002","traffic_fraction":0.005,"people_fraction":0.005,"venue_air_distance":"1720","population":"1531"},{"fipsCode":"482013139001","traffic_fraction":0.002,"people_fraction":0.002,"venue_air_distance":"5307","population":"2455"},{"fipsCode":"482014227022","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"6480","population":"844"},{"fipsCode":"482014218004","traffic_fraction":0.004,"people_fraction":0.004,"venue_air_distance":"3747","population":"1347"},{"fipsCode":"482014226003","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"5661","population":"3134"},{"fipsCode":"482014128002","traffic_fraction":0.019,"people_fraction":0.012,"venue_air_distance":"994","population":"1517"},{"fipsCode":"482014124001","traffic_fraction":0.004,"people_fraction":0.003,"venue_air_distance":"1367","population":"689"},{"fipsCode":"482014224022","traffic_fraction":0.001,"people_fraction":0.001,"venue_air_distance":"6996","population":"2003"},{"fipsCode":"482014208002","traffic_fraction":0.005,"people_fraction":0.003,"venue_air_distance":"3126","population":"919"},{"fipsCode":"482013126001","traffic_fraction":0.005,"people_fraction":0.002,"venue_air_distance":"5281","population":"3017"},{"fipsCode":"482014122002","traffic_fraction":0.002,"people_fraction":0.003,"venue_air_distance":"2834","population":"1157"},{"fipsCode":"482013304001","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"8808","population":"1288"},{"fipsCode":"482014207001","traffic_fraction":0.008,"people_fraction":0.004,"venue_air_distance":"3275","population":"563"},{"fipsCode":"482014221001","traffic_fraction":0.001,"people_fraction":0.001,"venue_air_distance":"6263","population":"1292"},{"fipsCode":"482014209001","traffic_fraction":0.007,"people_fraction":0.005,"venue_air_distance":"1715","population":"921"},{"fipsCode":"482014202002","traffic_fraction":0.006,"people_fraction":0.004,"venue_air_distance":"3022","population":"1222"},{"fipsCode":"482013341004","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"7110","population":"1289"},{"fipsCode":"482014118002","traffic_fraction":0.005,"people_fraction":0.003,"venue_air_distance":"1870","population":"1385"},{"fipsCode":"482014207002","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"3972","population":"769"},{"fipsCode":"482014133001","traffic_fraction":0.007,"people_fraction":0.005,"venue_air_distance":"1866","population":"1998"},{"fipsCode":"482013139002","traffic_fraction":0.001,"people_fraction":0.002,"venue_air_distance":"5567","population":"1026"},{"fipsCode":"482014133005","traffic_fraction":0.005,"people_fraction":0.003,"venue_air_distance":"2326","population":"745"},{"fipsCode":"482014218003","traffic_fraction":0.001,"people_fraction":0.001,"venue_air_distance":"4470","population":"1686"},{"fipsCode":"482014125002","traffic_fraction":0.011,"people_fraction":0.007,"venue_air_distance":"80","population":"873"},{"fipsCode":"482014224024","traffic_fraction":0.002,"people_fraction":0.002,"venue_air_distance":"6630","population":"864"},{"fipsCode":"482014126002","traffic_fraction":0.016,"people_fraction":0.011,"venue_air_distance":"1112","population":"1517"},{"fipsCode":"482014114001","traffic_fraction":0,"people_fraction":0.001,"venue_air_distance":"3895","population":"1429"},{"fipsCode":"482014116001","traffic_fraction":0.003,"people_fraction":0.002,"venue_air_distance":"2667","population":"1358"}]
fipsCode = []
traffic_fraction = []
people_fraction = []
venue_air_distance = []
population = []
for e in a:
    fipsCode.append(e['fipsCode'])
    traffic_fraction.append(e['traffic_fraction'])
    people_fraction.append(e['people_fraction'])
    venue_air_distance.append(e['venue_air_distance'])
    population.append(e['venue_air_distance'])

traffic = 0
for i in range(len(a)):
    traffic += float(population[i]) * float(people_fraction[i]) * float(traffic_fraction[i])